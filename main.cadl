import "@cadl-lang/rest";
import "@cadl-lang/openapi3";

@serviceTitle("Storage Queues")
@serviceVersion("2021-03-25")
@Cadl.Rest.produces("application/xml")
@Cadl.Rest.consumes("application/xml")
namespace Storage.Queues;

using Cadl.Http;

@doc("Storage Queues Messages")
@route("/{queueName}/messages")
@Cadl.Rest.produces("application/xml")
@Cadl.Rest.consumes("application/xml")
namespace Storage.Queues.Messages {
  @doc("Puts message on the queue.")
  @post
  op putMessage(
    @path queueName: string,
    @query visibilitytimeout?: int32,
    @query messagettl?: int32,
    @body message: QueueMessage
  ): CreatedResponse;
}

model QueueMessage {
  @header contentType: "application/xml";
  MessageText: string;
}
